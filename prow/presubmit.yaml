# PR Jenkins job triggering definitions.
# Keys: Full repo name: "org/repo".
# Values: List of jobs to run when events occur in the repo.
#   name:          Job name.
#   trigger:       Regexp commenters can say to trigger the job.
#   always_run:    Whether to run for every PR. Default is false. If this is
#                  set then your trigger needs to match "@k8s-bot test this".
#   context:       GitHub status context.
#   rerun_command: How should users trigger just this job, as a string, not a
#                  regex. For example, if the trigger regex is "(e2e )?test",
#                  then a rerun command might be "e2e test".
#   skip_report:   If true, then do not set status or comment on GitHub.
#   spec:          If this exists then run a kubernetes pod with this spec.
#                  Otherwise, run a Jenkins job.
# The unit tests in cmd/hook/jobs_test.go ensure that the job definitions are
# valid.
# TODO(fejta): Ensure all jobs define an owner.
---
Azure/acs-engine:
- name: pull-acs-engine-unit tests
  context: ACS-Engine unit tests
  always_run: true
  rerun_command: "@acs-bot unit test this"
  trigger: "@acs-bot (unit )?test this"
  branches:
  - master
  spec:
    containers:
    - image: docker.io/library/golang
      command: [ "bash", "-c", "git clone git@github.com:Azure/ACS-Engine; cd ACS-Engine; make" ]
